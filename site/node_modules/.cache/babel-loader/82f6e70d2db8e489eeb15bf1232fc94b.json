{"ast":null,"code":"import _classCallCheck from\"/Users/mcdaniel/github/lpm0073/lawrencemcdaniel.com/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mcdaniel/github/lpm0073/lawrencemcdaniel.com/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/mcdaniel/github/lpm0073/lawrencemcdaniel.com/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/mcdaniel/github/lpm0073/lawrencemcdaniel.com/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/mcdaniel/github/lpm0073/lawrencemcdaniel.com/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/*\n    https://www.smashingmagazine.com/2018/02/react-d3-ecosystem/\n */import React,{Component}from'react';import{selectAll,select}from\"d3-selection\";import transition from'd3-transition';import{wpGetFeaturedImage}from'../../shared/wpGetFeaturedImage';import'./styles.css';var LogoCube=/*#__PURE__*/function(_Component){_inherits(LogoCube,_Component);var _super=_createSuper(LogoCube);function LogoCube(props){var _this;_classCallCheck(this,LogoCube);_this=_super.call(this,props);_this.state={painters:0};_this.startPainting=_this.startPainting.bind(_assertThisInitialized(_this));_this.finishPainting=_this.finishPainting.bind(_assertThisInitialized(_this));return _this;}_createClass(LogoCube,[{key:\"startPainting\",value:function startPainting(){this.setState({painters:this.state.painters++});}},{key:\"finishPainting\",value:function finishPainting(){this.setState({painters:this.state.painters--});}},{key:\"componentDidMount\",value:function componentDidMount(){console.log(\"componentDidMount()\",this.state.painters);var self=this;if(self.state.painters==0){setTimeout(function(){console.log(\"i'm calling repaint()\");self.repaint();},1000);}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"d3-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d3-cube\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d3-side top\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d3-side front\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d3-side back\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d3-side right\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d3-side left\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d3-side bottom\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"logo\"})))));}},{key:\"logos\",value:function logos(){var self=this;return self.props.logos.items;}},{key:\"shuffleArray\",value:function shuffleArray(array){var i=array.length-1;for(;i>0;i--){var j=Math.floor(Math.random()*(i+1));var temp=array[i];array[i]=array[j];array[j]=temp;}return array;}},{key:\"repaint\",value:function repaint(){var self=this;if(self.props.logos.items.length==0){console.log(\"i am not ready.\");return false;}if(self.state.painters>0){console.log(\"too many painters. leaving.\");return false;}this.startPainting();console.log(\"repaint()\",self.state.painters);function random_logo(logos){return logos[Math.floor(Math.random()*logos.length)];}var logos=this.props.logos.items.map(function(post,indx){return wpGetFeaturedImage(post,null);});var idx=Math.floor(Math.random()*selectAll(\".logo\").size());selectAll(\".logo\").filter(function(d,i){return i===idx;}).each(function(){var side=select(this);setTimeout(function(){/* \n                    hack to slow down the refresh rate\n                    until i stop the race condition\n                */if(Math.random()<0.35){side.transition().duration(500).style(\"opacity\",0);if(Math.random()<0.10){side.style(\"background-image\",\"none\");}else{side.style(\"background-image\",\"url('\"+random_logo(logos)+\"')\");}side.transition().duration(500).style(\"opacity\",1);}self.finishPainting();self.repaint();},3000*Math.random());});}}]);return LogoCube;}(Component);export default LogoCube;","map":{"version":3,"sources":["/Users/mcdaniel/github/lpm0073/lawrencemcdaniel.com/site/src/components/logocube/Component.js"],"names":["React","Component","selectAll","select","transition","wpGetFeaturedImage","LogoCube","props","state","painters","startPainting","bind","finishPainting","setState","console","log","self","setTimeout","repaint","logos","items","array","i","length","j","Math","floor","random","temp","random_logo","map","post","indx","idx","size","filter","d","each","side","duration","style"],"mappings":"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","sourcesContent":["/*\n    https://www.smashingmagazine.com/2018/02/react-d3-ecosystem/\n */\nimport React, { Component } from 'react';\nimport { selectAll, select } from \"d3-selection\";\nimport transition from 'd3-transition';\nimport { wpGetFeaturedImage } from '../../shared/wpGetFeaturedImage';\nimport './styles.css';\n\nclass LogoCube extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            painters: 0\n        };\n        this.startPainting = this.startPainting.bind(this);\n        this.finishPainting = this.finishPainting.bind(this);\n    }\n\n    startPainting() {\n        this.setState({\n            painters: this.state.painters++\n        });\n\n    }\n    finishPainting() {\n        this.setState({\n            painters: this.state.painters--\n        });\n\n    }\n\n\n    componentDidMount() {\n\n        console.log(\"componentDidMount()\", this.state.painters);\n        var self = this;\n        if (self.state.painters == 0) {\n            setTimeout(function() {\n                console.log(\"i'm calling repaint()\")\n                self.repaint();\n            }, 1000);\n    \n        }\n\n\n    }\n\n    componentDidUpdate() {\n\n    }\n\n    render() {\n\n        return(\n\n            <div className=\"d3-container\">\n                <div className=\"d3-cube\">\n                    <div className=\"d3-side top\"><div>\n                        <div className=\"logo\"></div>\n                    </div></div>\n\n                    <div className=\"d3-side front\"><div>\n                        <div className=\"logo\"></div>\n                    </div></div>\n\n                    <div className=\"d3-side back\"><div>\n                        <div className=\"logo\"></div>\n                    </div></div>\n\n                    <div className=\"d3-side right\">\n                        <div>\n                        <div className=\"logo\"></div>\n                        </div>\n                    </div>\n                    <div className=\"d3-side left\">\n                        <div>\n                        <div className=\"logo\"></div>\n                        </div>\n                    </div>\n                    <div className=\"d3-side bottom\"><div>\n                        <div className=\"logo\"></div>\n                    </div></div>\n                </div>\n            </div>\n\n        );\n    }\n\n    logos() {\n        var self = this;\n        return self.props.logos.items;\n    }\n\n    shuffleArray(array) {\n        let i = array.length - 1;\n        for (; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            const temp = array[i];\n            array[i] = array[j];\n            array[j] = temp;\n        }\n        return array;\n    }\n\n\n    repaint() {\n        var self = this;\n        if (self.props.logos.items.length == 0) {\n            console.log(\"i am not ready.\");\n            return false;\n        }\n        if (self.state.painters > 0) {\n            console.log(\"too many painters. leaving.\");\n            return false;\n        }\n\n        this.startPainting();\n        console.log(\"repaint()\", self.state.painters);\n\n        function random_logo(logos) {\n            return logos[Math.floor(Math.random() * logos.length)];\n        }\n    \n        const logos =  this.props.logos.items.map((post, indx) => {\n            return wpGetFeaturedImage(post, null);\n        });\n              \n        var idx = Math.floor(Math.random() * selectAll(\".logo\").size());\n        selectAll(\".logo\")\n          .filter(function(d, i) {return i === idx})\n          .each(function() {\n      \n            var side = select(this);\n            setTimeout(function() {\n                /* \n                    hack to slow down the refresh rate\n                    until i stop the race condition\n                */\n                if (Math.random() < 0.35) {\n                    side.transition()\n                    .duration(500)\n                    .style(\"opacity\", 0);\n                    \n                    if (Math.random() < 0.10) {\n                        side.style(\"background-image\", \"none\");\n                    } else {\n                        side.style(\"background-image\", \"url('\" + random_logo(logos) + \"')\");\n                    }\n            \n                    side.transition()\n                        .duration(500)\n                        .style(\"opacity\", 1);\n\n                }\n        \n                self.finishPainting();\n                self.repaint();\n              }, 3000*Math.random());   \n      \n      \n          });\n      \n    }\n      \n}\n\nexport default LogoCube;\n"]},"metadata":{},"sourceType":"module"}