{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.clearGetFormCache = undefined;\nexports.getFormStateKey = getFormStateKey;\n\nvar _get = require('../utils/get');\n\nvar _get2 = _interopRequireDefault(_get);\n\nvar _isPlainObject = require('../utils/is-plain-object');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _pathStartsWith = require('../utils/path-starts-with');\n\nvar _pathStartsWith2 = _interopRequireDefault(_pathStartsWith);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar defaultStrategy = {\n  get: _get2.default,\n  keys: function keys(state) {\n    return Object.keys(state);\n  },\n  isObject: function isObject(state) {\n    return (0, _isPlainObject2.default)(state);\n  }\n};\n\nfunction joinPaths() {\n  for (var _len = arguments.length, paths = Array(_len), _key = 0; _key < _len; _key++) {\n    paths[_key] = arguments[_key];\n  }\n\n  return paths.filter(function (path) {\n    return !!path && path.length;\n  }).join('.');\n}\n\nfunction getFormStateKey(state, model) {\n  var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultStrategy;\n  var currentPath = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n  var deepCandidateKeys = [];\n  var result = null;\n  s.keys(state).some(function (key) {\n    var subState = s.get(state, key);\n\n    if (subState && s.get(subState, '$form')) {\n      var subStateModel = s.get(subState, '$form.model');\n\n      if ((0, _pathStartsWith2.default)(model, subStateModel) || subStateModel === '') {\n        var localPath = (0, _pathStartsWith.pathDifference)(model, subStateModel);\n        var resultPath = [currentPath, key];\n        var currentState = subState;\n        localPath.every(function (segment) {\n          if (s.get(currentState, segment) && s.get(currentState, segment + '.$form')) {\n            currentState = s.get(currentState, segment);\n            resultPath.push(segment);\n            return true;\n          }\n\n          return false;\n        });\n        result = joinPaths.apply(undefined, resultPath);\n        return true;\n      }\n\n      return false;\n    }\n\n    if (s.isObject(subState)) {\n      deepCandidateKeys.push(key);\n    }\n\n    return false;\n  });\n  if (result) return result;\n  deepCandidateKeys.some(function (key) {\n    result = getFormStateKey(s.get(state, key), model, s, joinPaths(currentPath, key));\n    return !!result;\n  });\n  if (result) return result;\n  return null;\n}\n\nvar formStateKeyCache = {};\n\nvar clearGetFormCache = exports.clearGetFormCache = function clearGetFormCache() {\n  return formStateKeyCache = {};\n}; // eslint-disable-line no-return-assign\n\n\nvar getFormStateKeyCached = function () {\n  return function (state, modelString) {\n    var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultStrategy;\n    if (formStateKeyCache[modelString]) return formStateKeyCache[modelString];\n    var result = getFormStateKey(state, modelString, s);\n    formStateKeyCache[modelString] = result; // eslint-disable-line no-return-assign\n\n    return result;\n  };\n}();\n\nfunction getForm(state, modelString) {\n  var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultStrategy;\n  var formStateKey = getFormStateKeyCached(state, modelString, s);\n\n  if (!formStateKey) {\n    return null;\n  }\n\n  var form = s.get(state, formStateKey);\n  return form;\n}\n\nexports.default = getForm;","map":{"version":3,"sources":["/Users/mcdaniel/github/lpm0073/coursera-react/confusion/node_modules/react-redux-form/lib/utils/get-form.js"],"names":["Object","defineProperty","exports","value","clearGetFormCache","undefined","getFormStateKey","_get","require","_get2","_interopRequireDefault","_isPlainObject","_isPlainObject2","_pathStartsWith","_pathStartsWith2","obj","__esModule","default","defaultStrategy","get","keys","state","isObject","joinPaths","_len","arguments","length","paths","Array","_key","filter","path","join","model","s","currentPath","deepCandidateKeys","result","some","key","subState","subStateModel","localPath","pathDifference","resultPath","currentState","every","segment","push","apply","formStateKeyCache","getFormStateKeyCached","modelString","getForm","formStateKey","form"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.clearGetFormCache = undefined;\nexports.getFormStateKey = getFormStateKey;\n\nvar _get = require('../utils/get');\n\nvar _get2 = _interopRequireDefault(_get);\n\nvar _isPlainObject = require('../utils/is-plain-object');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _pathStartsWith = require('../utils/path-starts-with');\n\nvar _pathStartsWith2 = _interopRequireDefault(_pathStartsWith);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar defaultStrategy = {\n  get: _get2.default,\n  keys: function keys(state) {\n    return Object.keys(state);\n  },\n  isObject: function isObject(state) {\n    return (0, _isPlainObject2.default)(state);\n  }\n};\n\nfunction joinPaths() {\n  for (var _len = arguments.length, paths = Array(_len), _key = 0; _key < _len; _key++) {\n    paths[_key] = arguments[_key];\n  }\n\n  return paths.filter(function (path) {\n    return !!path && path.length;\n  }).join('.');\n}\n\nfunction getFormStateKey(state, model) {\n  var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultStrategy;\n  var currentPath = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n\n  var deepCandidateKeys = [];\n  var result = null;\n\n  s.keys(state).some(function (key) {\n    var subState = s.get(state, key);\n\n    if (subState && s.get(subState, '$form')) {\n      var subStateModel = s.get(subState, '$form.model');\n\n      if ((0, _pathStartsWith2.default)(model, subStateModel) || subStateModel === '') {\n        var localPath = (0, _pathStartsWith.pathDifference)(model, subStateModel);\n\n        var resultPath = [currentPath, key];\n        var currentState = subState;\n\n        localPath.every(function (segment) {\n          if (s.get(currentState, segment) && s.get(currentState, segment + '.$form')) {\n            currentState = s.get(currentState, segment);\n            resultPath.push(segment);\n\n            return true;\n          }\n\n          return false;\n        });\n\n        result = joinPaths.apply(undefined, resultPath);\n\n        return true;\n      }\n\n      return false;\n    }\n\n    if (s.isObject(subState)) {\n      deepCandidateKeys.push(key);\n    }\n\n    return false;\n  });\n\n  if (result) return result;\n\n  deepCandidateKeys.some(function (key) {\n    result = getFormStateKey(s.get(state, key), model, s, joinPaths(currentPath, key));\n\n    return !!result;\n  });\n\n  if (result) return result;\n\n  return null;\n}\n\nvar formStateKeyCache = {};\n\nvar clearGetFormCache = exports.clearGetFormCache = function clearGetFormCache() {\n  return formStateKeyCache = {};\n}; // eslint-disable-line no-return-assign\n\nvar getFormStateKeyCached = function () {\n  return function (state, modelString) {\n    var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultStrategy;\n\n    if (formStateKeyCache[modelString]) return formStateKeyCache[modelString];\n\n    var result = getFormStateKey(state, modelString, s);\n\n    formStateKeyCache[modelString] = result; // eslint-disable-line no-return-assign\n\n    return result;\n  };\n}();\n\nfunction getForm(state, modelString) {\n  var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultStrategy;\n\n  var formStateKey = getFormStateKeyCached(state, modelString, s);\n\n  if (!formStateKey) {\n    return null;\n  }\n\n  var form = s.get(state, formStateKey);\n\n  return form;\n}\n\nexports.default = getForm;"]},"metadata":{},"sourceType":"script"}