{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nexports.getFieldAndForm = getFieldAndForm;\nexports.default = updateField;\n\nvar _icepick = require('icepick');\n\nvar _icepick2 = _interopRequireDefault(_icepick);\n\nvar _get = require('./get');\n\nvar _get2 = _interopRequireDefault(_get);\n\nvar _mapValues = require('./map-values');\n\nvar _mapValues2 = _interopRequireDefault(_mapValues);\n\nvar _formReducer = require('../reducers/form-reducer');\n\nvar _createField = require('./create-field');\n\nvar _assocIn = require('./assoc-in');\n\nvar _assocIn2 = _interopRequireDefault(_assocIn);\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction tempInitialState(path) {\n  var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  if (path.length === 1) return _defineProperty({}, path[0], initialValue);\n  return _defineProperty({}, path[0], tempInitialState(path.slice(1), initialValue));\n}\n\nfunction getFieldAndForm(formState, modelPath) {\n  var field = (0, _get2.default)(formState, modelPath);\n  var form = formState;\n  (0, _invariant2.default)(form, 'Could not find form for \"%s\" in the store.', modelPath);\n\n  if (!field) {\n    var initialValue = (0, _get2.default)(formState.$form.initialValue, modelPath);\n    form = _icepick2.default.merge((0, _formReducer.createInitialState)(formState.$form.model, tempInitialState(modelPath, initialValue)), formState);\n    field = (0, _get2.default)(form, modelPath);\n  }\n\n  return [field, form];\n}\n\nfunction updateField(state, path, newState, newSubState, updater) {\n  var _getFieldAndForm = getFieldAndForm(state, path),\n      _getFieldAndForm2 = _slicedToArray(_getFieldAndForm, 2),\n      field = _getFieldAndForm2[0],\n      fullState = _getFieldAndForm2[1];\n\n  if (!field) return state;\n  var isForm = field.hasOwnProperty('$form');\n  var fieldPath = isForm ? [].concat(_toConsumableArray(path), ['$form']) : path;\n  var fieldState = isForm ? field.$form : field;\n  var updatedFieldState = typeof newState === 'function' ? newState(fieldState) : newState;\n\n  if (isForm && newSubState) {\n    var formState = (0, _mapValues2.default)(field, function (subState, key) {\n      if (key === '$form') {\n        return (0, _createField.updateFieldState)(fieldState, updatedFieldState);\n      }\n\n      var updatedSubState = typeof newSubState === 'function' ? newSubState(subState, updatedFieldState) : newSubState;\n      return (0, _createField.updateFieldState)(subState, updatedSubState);\n    });\n    if (!path.length) return formState;\n    return (0, _assocIn2.default)(fullState, path, formState, updater);\n  }\n\n  return (0, _assocIn2.default)(fullState, fieldPath, (0, _createField.updateFieldState)(fieldState, updatedFieldState), updater);\n}","map":{"version":3,"sources":["/Users/mcdaniel/github/lpm0073/lawrencemcdaniel.com/site/node_modules/react-redux-form/lib/utils/update-field.js"],"names":["Object","defineProperty","exports","value","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","getFieldAndForm","default","updateField","_icepick","require","_icepick2","_interopRequireDefault","_get","_get2","_mapValues","_mapValues2","_formReducer","_createField","_assocIn","_assocIn2","_invariant","_invariant2","obj","__esModule","_toConsumableArray","arr2","from","_defineProperty","key","enumerable","configurable","writable","tempInitialState","path","initialValue","arguments","slice","formState","modelPath","field","form","$form","merge","createInitialState","model","state","newState","newSubState","updater","_getFieldAndForm","_getFieldAndForm2","fullState","isForm","hasOwnProperty","fieldPath","concat","fieldState","updatedFieldState","subState","updateFieldState","updatedSubState"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.getFieldAndForm = getFieldAndForm;\nexports.default = updateField;\n\nvar _icepick = require('icepick');\n\nvar _icepick2 = _interopRequireDefault(_icepick);\n\nvar _get = require('./get');\n\nvar _get2 = _interopRequireDefault(_get);\n\nvar _mapValues = require('./map-values');\n\nvar _mapValues2 = _interopRequireDefault(_mapValues);\n\nvar _formReducer = require('../reducers/form-reducer');\n\nvar _createField = require('./create-field');\n\nvar _assocIn = require('./assoc-in');\n\nvar _assocIn2 = _interopRequireDefault(_assocIn);\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction tempInitialState(path) {\n  var initialValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (path.length === 1) return _defineProperty({}, path[0], initialValue);\n\n  return _defineProperty({}, path[0], tempInitialState(path.slice(1), initialValue));\n}\n\nfunction getFieldAndForm(formState, modelPath) {\n  var field = (0, _get2.default)(formState, modelPath);\n  var form = formState;\n\n  (0, _invariant2.default)(form, 'Could not find form for \"%s\" in the store.', modelPath);\n\n  if (!field) {\n    var initialValue = (0, _get2.default)(formState.$form.initialValue, modelPath);\n\n    form = _icepick2.default.merge((0, _formReducer.createInitialState)(formState.$form.model, tempInitialState(modelPath, initialValue)), formState);\n\n    field = (0, _get2.default)(form, modelPath);\n  }\n\n  return [field, form];\n}\n\nfunction updateField(state, path, newState, newSubState, updater) {\n  var _getFieldAndForm = getFieldAndForm(state, path),\n      _getFieldAndForm2 = _slicedToArray(_getFieldAndForm, 2),\n      field = _getFieldAndForm2[0],\n      fullState = _getFieldAndForm2[1];\n\n  if (!field) return state;\n\n  var isForm = field.hasOwnProperty('$form');\n  var fieldPath = isForm ? [].concat(_toConsumableArray(path), ['$form']) : path;\n\n  var fieldState = isForm ? field.$form : field;\n\n  var updatedFieldState = typeof newState === 'function' ? newState(fieldState) : newState;\n\n  if (isForm && newSubState) {\n    var formState = (0, _mapValues2.default)(field, function (subState, key) {\n      if (key === '$form') {\n        return (0, _createField.updateFieldState)(fieldState, updatedFieldState);\n      }\n\n      var updatedSubState = typeof newSubState === 'function' ? newSubState(subState, updatedFieldState) : newSubState;\n\n      return (0, _createField.updateFieldState)(subState, updatedSubState);\n    });\n\n    if (!path.length) return formState;\n\n    return (0, _assocIn2.default)(fullState, path, formState, updater);\n  }\n\n  return (0, _assocIn2.default)(fullState, fieldPath, (0, _createField.updateFieldState)(fieldState, updatedFieldState), updater);\n}"]},"metadata":{},"sourceType":"script"}