{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createInitialState = createInitialState;\nexports.default = createFormReducer;\n\nvar _get2 = require('../utils/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _arraysEqual = require('../utils/arrays-equal');\n\nvar _arraysEqual2 = _interopRequireDefault(_arraysEqual);\n\nvar _isPlainObject = require('../utils/is-plain-object');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _toPath = require('../utils/to-path');\n\nvar _toPath2 = _interopRequireDefault(_toPath);\n\nvar _composeReducers = require('../utils/compose-reducers');\n\nvar _composeReducers2 = _interopRequireDefault(_composeReducers);\n\nvar _batchedEnhancer = require('../enhancers/batched-enhancer');\n\nvar _batchedEnhancer2 = _interopRequireDefault(_batchedEnhancer);\n\nvar _changeActionReducer = require('./form/change-action-reducer');\n\nvar _changeActionReducer2 = _interopRequireDefault(_changeActionReducer);\n\nvar _formActionsReducer = require('./form-actions-reducer');\n\nvar _createField = require('../utils/create-field');\n\nvar _createField2 = _interopRequireDefault(_createField);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction createInitialState(model, state) {\n  var customInitialFieldState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  if (Array.isArray(state) || (0, _isPlainObject2.default)(state)) {\n    return (0, _createField.createFormState)(model, state, customInitialFieldState, options);\n  }\n\n  return (0, _createField2.default)(model, state, customInitialFieldState, options);\n}\n\nfunction wrapFormReducer(plugin, modelPath, initialState) {\n  return function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n    if (!action.model) return state;\n    var path = (0, _toPath2.default)(action.model);\n\n    if (modelPath.length && !(0, _arraysEqual2.default)(path.slice(0, modelPath.length), modelPath)) {\n      return state;\n    }\n\n    var localPath = path.slice(modelPath.length);\n    return plugin(state, action, localPath);\n  };\n}\n\nfunction createFormReducer(model) {\n  var initialState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _options$plugins = options.plugins,\n      plugins = _options$plugins === undefined ? [] : _options$plugins,\n      customInitialFieldState = options.initialFieldState,\n      _options$transformAct = options.transformAction,\n      transformAction = _options$transformAct === undefined ? null : _options$transformAct;\n  var modelPath = (0, _toPath2.default)(model);\n  var initialFormState = createInitialState(model, initialState, customInitialFieldState, options);\n  var defaultPlugins = [_changeActionReducer2.default, (0, _formActionsReducer.createFormActionsReducer)({\n    initialFieldState: customInitialFieldState\n  })];\n  var wrappedPlugins = plugins.concat(defaultPlugins).map(function (plugin) {\n    return wrapFormReducer(plugin, modelPath, initialFormState);\n  });\n  return (0, _batchedEnhancer2.default)(_composeReducers2.default.apply(undefined, _toConsumableArray(wrappedPlugins)), undefined, {\n    transformAction: transformAction\n  });\n}","map":{"version":3,"sources":["/Users/mcdaniel/github/lpm0073/coursera-react/confusion/node_modules/react-redux-form/lib/reducers/form-reducer.js"],"names":["Object","defineProperty","exports","value","createInitialState","default","createFormReducer","_get2","require","_get3","_interopRequireDefault","_arraysEqual","_arraysEqual2","_isPlainObject","_isPlainObject2","_toPath","_toPath2","_composeReducers","_composeReducers2","_batchedEnhancer","_batchedEnhancer2","_changeActionReducer","_changeActionReducer2","_formActionsReducer","_createField","_createField2","obj","__esModule","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","model","state","customInitialFieldState","arguments","undefined","options","createFormState","wrapFormReducer","plugin","modelPath","initialState","action","path","slice","localPath","_options$plugins","plugins","initialFieldState","_options$transformAct","transformAction","initialFormState","defaultPlugins","createFormActionsReducer","wrappedPlugins","concat","map","apply"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createInitialState = createInitialState;\nexports.default = createFormReducer;\n\nvar _get2 = require('../utils/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _arraysEqual = require('../utils/arrays-equal');\n\nvar _arraysEqual2 = _interopRequireDefault(_arraysEqual);\n\nvar _isPlainObject = require('../utils/is-plain-object');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _toPath = require('../utils/to-path');\n\nvar _toPath2 = _interopRequireDefault(_toPath);\n\nvar _composeReducers = require('../utils/compose-reducers');\n\nvar _composeReducers2 = _interopRequireDefault(_composeReducers);\n\nvar _batchedEnhancer = require('../enhancers/batched-enhancer');\n\nvar _batchedEnhancer2 = _interopRequireDefault(_batchedEnhancer);\n\nvar _changeActionReducer = require('./form/change-action-reducer');\n\nvar _changeActionReducer2 = _interopRequireDefault(_changeActionReducer);\n\nvar _formActionsReducer = require('./form-actions-reducer');\n\nvar _createField = require('../utils/create-field');\n\nvar _createField2 = _interopRequireDefault(_createField);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction createInitialState(model, state) {\n  var customInitialFieldState = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  if (Array.isArray(state) || (0, _isPlainObject2.default)(state)) {\n    return (0, _createField.createFormState)(model, state, customInitialFieldState, options);\n  }\n\n  return (0, _createField2.default)(model, state, customInitialFieldState, options);\n}\n\nfunction wrapFormReducer(plugin, modelPath, initialState) {\n  return function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    if (!action.model) return state;\n\n    var path = (0, _toPath2.default)(action.model);\n\n    if (modelPath.length && !(0, _arraysEqual2.default)(path.slice(0, modelPath.length), modelPath)) {\n      return state;\n    }\n\n    var localPath = path.slice(modelPath.length);\n\n    return plugin(state, action, localPath);\n  };\n}\n\nfunction createFormReducer(model) {\n  var initialState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _options$plugins = options.plugins,\n      plugins = _options$plugins === undefined ? [] : _options$plugins,\n      customInitialFieldState = options.initialFieldState,\n      _options$transformAct = options.transformAction,\n      transformAction = _options$transformAct === undefined ? null : _options$transformAct;\n\n  var modelPath = (0, _toPath2.default)(model);\n  var initialFormState = createInitialState(model, initialState, customInitialFieldState, options);\n\n  var defaultPlugins = [_changeActionReducer2.default, (0, _formActionsReducer.createFormActionsReducer)({ initialFieldState: customInitialFieldState })];\n\n  var wrappedPlugins = plugins.concat(defaultPlugins).map(function (plugin) {\n    return wrapFormReducer(plugin, modelPath, initialFormState);\n  });\n\n  return (0, _batchedEnhancer2.default)(_composeReducers2.default.apply(undefined, _toConsumableArray(wrappedPlugins)), undefined, {\n    transformAction: transformAction\n  });\n}"]},"metadata":{},"sourceType":"script"}