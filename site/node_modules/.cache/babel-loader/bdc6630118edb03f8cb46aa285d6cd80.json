{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createErrorsClass = undefined;\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _get2 = require('../utils/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _map = require('../utils/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _iteratee = require('../utils/iteratee');\n\nvar _iteratee2 = _interopRequireDefault(_iteratee);\n\nvar _isPlainObject = require('../utils/is-plain-object');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _omit = require('../utils/omit');\n\nvar _omit2 = _interopRequireDefault(_omit);\n\nvar _getForm = require('../utils/get-form');\n\nvar _getForm2 = _interopRequireDefault(_getForm);\n\nvar _getFieldFromState = require('../utils/get-field-from-state');\n\nvar _getFieldFromState2 = _interopRequireDefault(_getFieldFromState);\n\nvar _getModel = require('../utils/get-model');\n\nvar _getModel2 = _interopRequireDefault(_getModel);\n\nvar _isValid = require('../form/is-valid');\n\nvar _isValid2 = _interopRequireDefault(_isValid);\n\nvar _resolveModel = require('../utils/resolve-model');\n\nvar _resolveModel2 = _interopRequireDefault(_resolveModel);\n\nvar _initialFieldState = require('../constants/initial-field-state');\n\nvar _initialFieldState2 = _interopRequireDefault(_initialFieldState);\n\nvar _shallowEqual = require('../utils/shallow-equal');\n\nvar _shallowEqual2 = _interopRequireDefault(_shallowEqual);\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar defaultStrategy = {\n  get: _get3.default,\n  getForm: _getForm2.default,\n  getFieldFromState: _getFieldFromState2.default\n};\nvar propTypes = {\n  // Computed props\n  modelValue: _propTypes2.default.any,\n  formValue: _propTypes2.default.object,\n  fieldValue: _propTypes2.default.object,\n  // Provided props\n  model: _propTypes2.default.string.isRequired,\n  messages: _propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func, _propTypes2.default.bool])),\n  show: _propTypes2.default.any,\n  wrapper: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.func, _propTypes2.default.element]),\n  component: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.func, _propTypes2.default.element]),\n  dispatch: _propTypes2.default.func,\n  dynamic: _propTypes2.default.oneOfType([_propTypes2.default.bool, _propTypes2.default.arrayOf(_propTypes2.default.string)]),\n  store: _propTypes2.default.shape({\n    subscribe: _propTypes2.default.func,\n    dispatch: _propTypes2.default.func,\n    getState: _propTypes2.default.func\n  }),\n  storeSubscription: _propTypes2.default.any\n};\n\nfunction showErrors(field, form) {\n  var show = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n  if (typeof show === 'function') {\n    return show(field, form);\n  }\n\n  if (!Array.isArray(show) && (typeof show === 'undefined' ? 'undefined' : _typeof(show)) !== 'object' && typeof show !== 'string') {\n    return !!show;\n  }\n\n  return (0, _iteratee2.default)(show)(field);\n}\n\nfunction createErrorsClass() {\n  var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultStrategy;\n\n  var Errors = function (_Component) {\n    _inherits(Errors, _Component);\n\n    function Errors() {\n      _classCallCheck(this, Errors);\n\n      return _possibleConstructorReturn(this, (Errors.__proto__ || Object.getPrototypeOf(Errors)).apply(this, arguments));\n    }\n\n    _createClass(Errors, [{\n      key: 'shouldComponentUpdate',\n      value: function shouldComponentUpdate(nextProps) {\n        var fieldValue = nextProps.fieldValue,\n            formValue = nextProps.formValue;\n        var dynamic = this.props.dynamic;\n\n        if (dynamic) {\n          return !(0, _shallowEqual2.default)(this.props, nextProps);\n        }\n\n        return fieldValue !== this.props.fieldValue || formValue !== this.props.formValue;\n      }\n    }, {\n      key: 'mapErrorMessages',\n      value: function mapErrorMessages(errors) {\n        var _this2 = this;\n\n        var messages = this.props.messages;\n\n        if (typeof errors === 'string') {\n          return this.renderError(errors, 'error');\n        }\n\n        if (!errors) return null;\n        return (0, _map2.default)(errors, function (error, key) {\n          var message = messages[key];\n\n          if (error) {\n            if (message || typeof error === 'string') {\n              return _this2.renderError(message || error, key);\n            } else if ((0, _isPlainObject2.default)(error)) {\n              return _this2.mapErrorMessages(error);\n            }\n          }\n\n          return false;\n        }).reduce(function (a, b) {\n          return b ? a.concat(b) : a;\n        }, []);\n      }\n    }, {\n      key: 'renderError',\n      value: function renderError(message, key) {\n        var _props = this.props,\n            component = _props.component,\n            model = _props.model,\n            modelValue = _props.modelValue,\n            fieldValue = _props.fieldValue,\n            errors = _props.fieldValue.errors;\n        var errorProps = {\n          key: key,\n          model: model,\n          modelValue: modelValue,\n          fieldValue: fieldValue\n        };\n        var messageString = typeof message === 'function' ? message(modelValue, errors[key]) : message;\n        if (!messageString) return null;\n        var allowedProps = typeof component === 'function' ? errorProps : {\n          key: key\n        };\n        return _react2.default.createElement(component, allowedProps, messageString);\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _props2 = this.props,\n            fieldValue = _props2.fieldValue,\n            formValue = _props2.formValue,\n            show = _props2.show,\n            wrapper = _props2.wrapper;\n        var allowedProps = typeof wrapper === 'function' ? this.props : (0, _omit2.default)(this.props, Object.keys(propTypes));\n\n        if (!showErrors(fieldValue, formValue, show)) {\n          return null;\n        }\n\n        var errorMessages = (0, _isValid2.default)(fieldValue) ? null : this.mapErrorMessages(fieldValue.errors);\n        if (!errorMessages) return null;\n        return _react2.default.createElement(wrapper, allowedProps, errorMessages);\n      }\n    }]);\n\n    return Errors;\n  }(_react.Component);\n\n  process.env.NODE_ENV !== \"production\" ? Errors.propTypes = propTypes : void 0;\n  Errors.defaultProps = {\n    wrapper: 'div',\n    component: 'span',\n    messages: {},\n    show: true,\n    dynamic: true\n  };\n\n  function mapStateToProps(state, _ref) {\n    var model = _ref.model;\n    var modelString = (0, _getModel2.default)(model, state);\n    var form = s.getForm(state, modelString);\n    (0, _invariant2.default)(form, 'Unable to retrieve errors. ' + 'Could not find form for \"%s\" in the store.', modelString);\n    var formValue = form.$form;\n\n    var fieldValue = s.getFieldFromState(state, modelString) || _initialFieldState2.default;\n\n    return {\n      model: modelString,\n      modelValue: s.get(state, modelString),\n      formValue: formValue,\n      fieldValue: fieldValue\n    };\n  }\n\n  return (0, _resolveModel2.default)((0, _reactRedux.connect)(mapStateToProps)(Errors));\n}\n\nexports.createErrorsClass = createErrorsClass;\nexports.default = createErrorsClass();","map":{"version":3,"sources":["/Users/mcdaniel/github/lpm0073/coursera-react/confusion/node_modules/react-redux-form/lib/components/errors-component.js"],"names":["Object","defineProperty","exports","value","createErrorsClass","undefined","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_typeof","Symbol","iterator","obj","constructor","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_reactRedux","_get2","_get3","_map","_map2","_iteratee","_iteratee2","_isPlainObject","_isPlainObject2","_omit","_omit2","_getForm","_getForm2","_getFieldFromState","_getFieldFromState2","_getModel","_getModel2","_isValid","_isValid2","_resolveModel","_resolveModel2","_initialFieldState","_initialFieldState2","_shallowEqual","_shallowEqual2","_invariant","_invariant2","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","defaultStrategy","get","getForm","getFieldFromState","propTypes","modelValue","any","formValue","object","fieldValue","model","string","isRequired","messages","objectOf","oneOfType","node","func","bool","show","wrapper","element","component","dispatch","dynamic","arrayOf","store","shape","subscribe","getState","storeSubscription","showErrors","field","form","arguments","Array","isArray","s","Errors","_Component","getPrototypeOf","apply","shouldComponentUpdate","nextProps","mapErrorMessages","errors","_this2","renderError","error","message","reduce","a","b","concat","_props","errorProps","messageString","allowedProps","createElement","render","_props2","keys","errorMessages","Component","process","env","NODE_ENV","defaultProps","mapStateToProps","state","_ref","modelString","$form","connect"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createErrorsClass = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = require('react-redux');\n\nvar _get2 = require('../utils/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _map = require('../utils/map');\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _iteratee = require('../utils/iteratee');\n\nvar _iteratee2 = _interopRequireDefault(_iteratee);\n\nvar _isPlainObject = require('../utils/is-plain-object');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nvar _omit = require('../utils/omit');\n\nvar _omit2 = _interopRequireDefault(_omit);\n\nvar _getForm = require('../utils/get-form');\n\nvar _getForm2 = _interopRequireDefault(_getForm);\n\nvar _getFieldFromState = require('../utils/get-field-from-state');\n\nvar _getFieldFromState2 = _interopRequireDefault(_getFieldFromState);\n\nvar _getModel = require('../utils/get-model');\n\nvar _getModel2 = _interopRequireDefault(_getModel);\n\nvar _isValid = require('../form/is-valid');\n\nvar _isValid2 = _interopRequireDefault(_isValid);\n\nvar _resolveModel = require('../utils/resolve-model');\n\nvar _resolveModel2 = _interopRequireDefault(_resolveModel);\n\nvar _initialFieldState = require('../constants/initial-field-state');\n\nvar _initialFieldState2 = _interopRequireDefault(_initialFieldState);\n\nvar _shallowEqual = require('../utils/shallow-equal');\n\nvar _shallowEqual2 = _interopRequireDefault(_shallowEqual);\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar defaultStrategy = {\n  get: _get3.default,\n  getForm: _getForm2.default,\n  getFieldFromState: _getFieldFromState2.default\n};\n\nvar propTypes = {\n  // Computed props\n  modelValue: _propTypes2.default.any,\n  formValue: _propTypes2.default.object,\n  fieldValue: _propTypes2.default.object,\n\n  // Provided props\n  model: _propTypes2.default.string.isRequired,\n  messages: _propTypes2.default.objectOf(_propTypes2.default.oneOfType([_propTypes2.default.node, _propTypes2.default.func, _propTypes2.default.bool])),\n  show: _propTypes2.default.any,\n  wrapper: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.func, _propTypes2.default.element]),\n  component: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.func, _propTypes2.default.element]),\n  dispatch: _propTypes2.default.func,\n  dynamic: _propTypes2.default.oneOfType([_propTypes2.default.bool, _propTypes2.default.arrayOf(_propTypes2.default.string)]),\n  store: _propTypes2.default.shape({\n    subscribe: _propTypes2.default.func,\n    dispatch: _propTypes2.default.func,\n    getState: _propTypes2.default.func\n  }),\n  storeSubscription: _propTypes2.default.any\n};\n\nfunction showErrors(field, form) {\n  var show = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n  if (typeof show === 'function') {\n    return show(field, form);\n  }\n\n  if (!Array.isArray(show) && (typeof show === 'undefined' ? 'undefined' : _typeof(show)) !== 'object' && typeof show !== 'string') {\n    return !!show;\n  }\n\n  return (0, _iteratee2.default)(show)(field);\n}\n\nfunction createErrorsClass() {\n  var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultStrategy;\n\n  var Errors = function (_Component) {\n    _inherits(Errors, _Component);\n\n    function Errors() {\n      _classCallCheck(this, Errors);\n\n      return _possibleConstructorReturn(this, (Errors.__proto__ || Object.getPrototypeOf(Errors)).apply(this, arguments));\n    }\n\n    _createClass(Errors, [{\n      key: 'shouldComponentUpdate',\n      value: function shouldComponentUpdate(nextProps) {\n        var fieldValue = nextProps.fieldValue,\n            formValue = nextProps.formValue;\n        var dynamic = this.props.dynamic;\n\n\n        if (dynamic) {\n          return !(0, _shallowEqual2.default)(this.props, nextProps);\n        }\n\n        return fieldValue !== this.props.fieldValue || formValue !== this.props.formValue;\n      }\n    }, {\n      key: 'mapErrorMessages',\n      value: function mapErrorMessages(errors) {\n        var _this2 = this;\n\n        var messages = this.props.messages;\n\n\n        if (typeof errors === 'string') {\n          return this.renderError(errors, 'error');\n        }\n\n        if (!errors) return null;\n\n        return (0, _map2.default)(errors, function (error, key) {\n          var message = messages[key];\n\n          if (error) {\n            if (message || typeof error === 'string') {\n              return _this2.renderError(message || error, key);\n            } else if ((0, _isPlainObject2.default)(error)) {\n              return _this2.mapErrorMessages(error);\n            }\n          }\n\n          return false;\n        }).reduce(function (a, b) {\n          return b ? a.concat(b) : a;\n        }, []);\n      }\n    }, {\n      key: 'renderError',\n      value: function renderError(message, key) {\n        var _props = this.props,\n            component = _props.component,\n            model = _props.model,\n            modelValue = _props.modelValue,\n            fieldValue = _props.fieldValue,\n            errors = _props.fieldValue.errors;\n\n\n        var errorProps = {\n          key: key,\n          model: model,\n          modelValue: modelValue,\n          fieldValue: fieldValue\n        };\n\n        var messageString = typeof message === 'function' ? message(modelValue, errors[key]) : message;\n\n        if (!messageString) return null;\n\n        var allowedProps = typeof component === 'function' ? errorProps : { key: key };\n\n        return _react2.default.createElement(component, allowedProps, messageString);\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _props2 = this.props,\n            fieldValue = _props2.fieldValue,\n            formValue = _props2.formValue,\n            show = _props2.show,\n            wrapper = _props2.wrapper;\n\n\n        var allowedProps = typeof wrapper === 'function' ? this.props : (0, _omit2.default)(this.props, Object.keys(propTypes));\n\n        if (!showErrors(fieldValue, formValue, show)) {\n          return null;\n        }\n\n        var errorMessages = (0, _isValid2.default)(fieldValue) ? null : this.mapErrorMessages(fieldValue.errors);\n\n        if (!errorMessages) return null;\n\n        return _react2.default.createElement(wrapper, allowedProps, errorMessages);\n      }\n    }]);\n\n    return Errors;\n  }(_react.Component);\n\n  process.env.NODE_ENV !== \"production\" ? Errors.propTypes = propTypes : void 0;\n\n  Errors.defaultProps = {\n    wrapper: 'div',\n    component: 'span',\n    messages: {},\n    show: true,\n    dynamic: true\n  };\n\n  function mapStateToProps(state, _ref) {\n    var model = _ref.model;\n\n    var modelString = (0, _getModel2.default)(model, state);\n\n    var form = s.getForm(state, modelString);\n    (0, _invariant2.default)(form, 'Unable to retrieve errors. ' + 'Could not find form for \"%s\" in the store.', modelString);\n\n    var formValue = form.$form;\n    var fieldValue = s.getFieldFromState(state, modelString) || _initialFieldState2.default;\n\n    return {\n      model: modelString,\n      modelValue: s.get(state, modelString),\n      formValue: formValue,\n      fieldValue: fieldValue\n    };\n  }\n\n  return (0, _resolveModel2.default)((0, _reactRedux.connect)(mapStateToProps)(Errors));\n}\n\nexports.createErrorsClass = createErrorsClass;\nexports.default = createErrorsClass();"]},"metadata":{},"sourceType":"script"}