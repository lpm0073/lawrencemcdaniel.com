{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.createModelActions = createModelActions;\n\nvar _get2 = require('../utils/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _identity = require('../utils/identity');\n\nvar _identity2 = _interopRequireDefault(_identity);\n\nvar _icepick = require('icepick');\n\nvar _icepick2 = _interopRequireDefault(_icepick);\n\nvar _getValue = require('../utils/get-value');\n\nvar _getValue2 = _interopRequireDefault(_getValue);\n\nvar _isMulti = require('../utils/is-multi');\n\nvar _isMulti2 = _interopRequireDefault(_isMulti);\n\nvar _actionTypes = require('../action-types');\n\nvar _actionTypes2 = _interopRequireDefault(_actionTypes);\n\nvar _mapValues = require('../utils/map-values');\n\nvar _mapValues2 = _interopRequireDefault(_mapValues);\n\nvar _track = require('../utils/track');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar defaultStrategies = {\n  get: _get3.default,\n  getValue: _getValue2.default,\n  splice: _icepick2.default.splice,\n  merge: _icepick2.default.merge,\n  remove: _icepick2.default.dissoc,\n  push: _icepick2.default.push,\n  length: function length(value) {\n    return value.length;\n  },\n  object: {},\n  array: []\n};\n\nfunction optionsFromArgs(args, index) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  if (typeof index === 'undefined') return undefined;\n  return _extends({}, options, args[index]);\n}\n\nfunction createModelActions() {\n  var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultStrategies;\n\n  var change = function change(model, value) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {}; // option defaults\n\n    var changeOptions = _extends({\n      silent: false,\n      multi: (0, _isMulti2.default)(model),\n      external: true\n    }, options);\n\n    if (typeof value === 'function') {\n      return function (dispatch, getState) {\n        var modelValue = s.get(getState(), model);\n        return dispatch(change(model, value(modelValue), options));\n      };\n    }\n\n    return _extends({\n      type: _actionTypes2.default.CHANGE,\n      model: model,\n      value: s.getValue(value)\n    }, changeOptions);\n  };\n\n  function createModifierAction(modifier, defaultValue, optionsIndex, getOptions) {\n    var actionCreator = function actionCreator(model) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return function (dispatch, getState) {\n        var modelValue = s.get(getState(), model, defaultValue);\n        var value = modifier.apply(undefined, [modelValue].concat(args));\n        var options = getOptions ? getOptions.apply(undefined, [value].concat(args)) : undefined;\n        dispatch(change(model, value, optionsFromArgs(args, optionsIndex - 1, options)));\n      };\n    };\n\n    return actionCreator;\n  }\n\n  var xor = createModifierAction(function (value, item) {\n    var iteratee = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (_item) {\n      return _item === item;\n    };\n    var valueWithoutItem = value.filter(function (_item) {\n      return !iteratee(_item);\n    });\n    return s.length(value) === s.length(valueWithoutItem) ? s.push(value, item) : valueWithoutItem;\n  }, s.array, 3);\n  var push = createModifierAction(function (value, item) {\n    return s.push(value || s.array, item);\n  }, s.array, 2);\n  var toggle = createModifierAction(function (value) {\n    return !value;\n  }, undefined, 1);\n\n  var checkWithValue = function checkWithValue(model, value) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var currentValue = options.currentValue;\n\n    if ((0, _isMulti2.default)(model)) {\n      var valueWithItem = currentValue || s.array;\n      var valueWithoutItem = (valueWithItem || s.array).filter(function (item) {\n        return item !== value;\n      });\n      var multiValue = s.length(valueWithoutItem) === s.length(valueWithItem) ? s.push(valueWithItem, value) : valueWithoutItem;\n      return change(model, multiValue);\n    }\n\n    if (typeof value === 'undefined') {\n      return change(model, !currentValue);\n    }\n\n    return change(model, value);\n  };\n\n  var check = function check(model, value) {\n    return function (dispatch, getState) {\n      var modelValue = s.get(getState(), model);\n      var action = checkWithValue(model, value, {\n        currentValue: modelValue\n      });\n      dispatch(action);\n    };\n  };\n\n  var filter = createModifierAction(function (value, iteratee) {\n    return value.filter(iteratee);\n  }, s.array, 2);\n\n  var reset = function reset(model) {\n    return {\n      type: _actionTypes2.default.RESET,\n      model: model\n    };\n  };\n\n  var map = createModifierAction(function (value) {\n    var iteratee = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _identity2.default;\n    return value.map(iteratee);\n  }, s.array, 2);\n  var remove = createModifierAction(function (value, index) {\n    return s.splice(value, index, 1);\n  }, s.array, 2, function (_, index) {\n    return {\n      removeKeys: [index]\n    };\n  });\n  var move = createModifierAction(function (value, indexFrom, indexTo) {\n    if (indexFrom >= s.length(value) || indexTo >= s.length(value)) {\n      throw new Error('Error moving array item: invalid bounds ' + indexFrom + ', ' + indexTo);\n    }\n\n    var item = s.get(value, indexFrom);\n    var removed = s.splice(value, indexFrom, 1);\n    var inserted = s.splice(removed, indexTo, 0, item);\n    return inserted;\n  }, s.array, 3);\n  var merge = createModifierAction(s.merge, {}, 3);\n  var omit = createModifierAction(function (value) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var propsArray = typeof props === 'string' ? [props] : props;\n    var newValue = propsArray.reduce(function (acc, prop) {\n      return s.remove(acc, prop);\n    }, value);\n    return newValue;\n  }, {}, 2, function (_, props) {\n    return {\n      removeKeys: props\n    };\n  });\n\n  var load = function load(model, values, options) {\n    return change(model, values, _extends({\n      silent: true,\n      load: true\n    }, options));\n  };\n\n  return (0, _mapValues2.default)({\n    change: change,\n    xor: xor,\n    push: push,\n    toggle: toggle,\n    check: check,\n    checkWithValue: checkWithValue,\n    filter: filter,\n    reset: reset,\n    map: map,\n    remove: remove,\n    move: move,\n    merge: merge,\n    omit: omit,\n    load: load\n  }, _track.trackable);\n}\n\nexports.default = createModelActions();","map":{"version":3,"sources":["/Users/mcdaniel/github/lpm0073/lawrencemcdaniel.com/site/node_modules/react-redux-form/lib/actions/model-actions.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","createModelActions","_get2","require","_get3","_interopRequireDefault","_identity","_identity2","_icepick","_icepick2","_getValue","_getValue2","_isMulti","_isMulti2","_actionTypes","_actionTypes2","_mapValues","_mapValues2","_track","obj","__esModule","default","defaultStrategies","get","getValue","splice","merge","remove","dissoc","push","object","array","optionsFromArgs","args","index","options","undefined","s","change","model","changeOptions","silent","multi","external","dispatch","getState","modelValue","type","CHANGE","createModifierAction","modifier","defaultValue","optionsIndex","getOptions","actionCreator","_len","Array","_key","apply","concat","xor","item","iteratee","_item","valueWithoutItem","filter","toggle","checkWithValue","currentValue","valueWithItem","multiValue","check","action","reset","RESET","map","_","removeKeys","move","indexFrom","indexTo","Error","removed","inserted","omit","props","propsArray","newValue","reduce","acc","prop","load","values","trackable"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.createModelActions = createModelActions;\n\nvar _get2 = require('../utils/get');\n\nvar _get3 = _interopRequireDefault(_get2);\n\nvar _identity = require('../utils/identity');\n\nvar _identity2 = _interopRequireDefault(_identity);\n\nvar _icepick = require('icepick');\n\nvar _icepick2 = _interopRequireDefault(_icepick);\n\nvar _getValue = require('../utils/get-value');\n\nvar _getValue2 = _interopRequireDefault(_getValue);\n\nvar _isMulti = require('../utils/is-multi');\n\nvar _isMulti2 = _interopRequireDefault(_isMulti);\n\nvar _actionTypes = require('../action-types');\n\nvar _actionTypes2 = _interopRequireDefault(_actionTypes);\n\nvar _mapValues = require('../utils/map-values');\n\nvar _mapValues2 = _interopRequireDefault(_mapValues);\n\nvar _track = require('../utils/track');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar defaultStrategies = {\n  get: _get3.default,\n  getValue: _getValue2.default,\n  splice: _icepick2.default.splice,\n  merge: _icepick2.default.merge,\n  remove: _icepick2.default.dissoc,\n  push: _icepick2.default.push,\n  length: function length(value) {\n    return value.length;\n  },\n  object: {},\n  array: []\n};\n\nfunction optionsFromArgs(args, index) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (typeof index === 'undefined') return undefined;\n\n  return _extends({}, options, args[index]);\n}\n\nfunction createModelActions() {\n  var s = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultStrategies;\n\n  var change = function change(model, value) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    // option defaults\n    var changeOptions = _extends({\n      silent: false,\n      multi: (0, _isMulti2.default)(model),\n      external: true\n    }, options);\n\n    if (typeof value === 'function') {\n      return function (dispatch, getState) {\n        var modelValue = s.get(getState(), model);\n\n        return dispatch(change(model, value(modelValue), options));\n      };\n    }\n\n    return _extends({\n      type: _actionTypes2.default.CHANGE,\n      model: model,\n      value: s.getValue(value)\n    }, changeOptions);\n  };\n\n  function createModifierAction(modifier, defaultValue, optionsIndex, getOptions) {\n    var actionCreator = function actionCreator(model) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      return function (dispatch, getState) {\n        var modelValue = s.get(getState(), model, defaultValue);\n        var value = modifier.apply(undefined, [modelValue].concat(args));\n\n        var options = getOptions ? getOptions.apply(undefined, [value].concat(args)) : undefined;\n\n        dispatch(change(model, value, optionsFromArgs(args, optionsIndex - 1, options)));\n      };\n    };\n\n    return actionCreator;\n  }\n\n  var xor = createModifierAction(function (value, item) {\n    var iteratee = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (_item) {\n      return _item === item;\n    };\n\n    var valueWithoutItem = value.filter(function (_item) {\n      return !iteratee(_item);\n    });\n\n    return s.length(value) === s.length(valueWithoutItem) ? s.push(value, item) : valueWithoutItem;\n  }, s.array, 3);\n\n  var push = createModifierAction(function (value, item) {\n    return s.push(value || s.array, item);\n  }, s.array, 2);\n\n  var toggle = createModifierAction(function (value) {\n    return !value;\n  }, undefined, 1);\n\n  var checkWithValue = function checkWithValue(model, value) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var currentValue = options.currentValue;\n\n\n    if ((0, _isMulti2.default)(model)) {\n      var valueWithItem = currentValue || s.array;\n      var valueWithoutItem = (valueWithItem || s.array).filter(function (item) {\n        return item !== value;\n      });\n      var multiValue = s.length(valueWithoutItem) === s.length(valueWithItem) ? s.push(valueWithItem, value) : valueWithoutItem;\n\n      return change(model, multiValue);\n    }\n\n    if (typeof value === 'undefined') {\n      return change(model, !currentValue);\n    }\n    return change(model, value);\n  };\n\n  var check = function check(model, value) {\n    return function (dispatch, getState) {\n      var modelValue = s.get(getState(), model);\n\n      var action = checkWithValue(model, value, {\n        currentValue: modelValue\n      });\n\n      dispatch(action);\n    };\n  };\n\n  var filter = createModifierAction(function (value, iteratee) {\n    return value.filter(iteratee);\n  }, s.array, 2);\n\n  var reset = function reset(model) {\n    return {\n      type: _actionTypes2.default.RESET,\n      model: model\n    };\n  };\n\n  var map = createModifierAction(function (value) {\n    var iteratee = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _identity2.default;\n    return value.map(iteratee);\n  }, s.array, 2);\n\n  var remove = createModifierAction(function (value, index) {\n    return s.splice(value, index, 1);\n  }, s.array, 2, function (_, index) {\n    return { removeKeys: [index] };\n  });\n\n  var move = createModifierAction(function (value, indexFrom, indexTo) {\n    if (indexFrom >= s.length(value) || indexTo >= s.length(value)) {\n      throw new Error('Error moving array item: invalid bounds ' + indexFrom + ', ' + indexTo);\n    }\n\n    var item = s.get(value, indexFrom);\n    var removed = s.splice(value, indexFrom, 1);\n    var inserted = s.splice(removed, indexTo, 0, item);\n\n    return inserted;\n  }, s.array, 3);\n\n  var merge = createModifierAction(s.merge, {}, 3);\n\n  var omit = createModifierAction(function (value) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    var propsArray = typeof props === 'string' ? [props] : props;\n\n    var newValue = propsArray.reduce(function (acc, prop) {\n      return s.remove(acc, prop);\n    }, value);\n\n    return newValue;\n  }, {}, 2, function (_, props) {\n    return { removeKeys: props };\n  });\n\n  var load = function load(model, values, options) {\n    return change(model, values, _extends({\n      silent: true,\n      load: true\n    }, options));\n  };\n\n  return (0, _mapValues2.default)({\n    change: change,\n    xor: xor,\n    push: push,\n    toggle: toggle,\n    check: check,\n    checkWithValue: checkWithValue,\n    filter: filter,\n    reset: reset,\n    map: map,\n    remove: remove,\n    move: move,\n    merge: merge,\n    omit: omit,\n    load: load\n  }, _track.trackable);\n}\n\nexports.default = createModelActions();"]},"metadata":{},"sourceType":"script"}