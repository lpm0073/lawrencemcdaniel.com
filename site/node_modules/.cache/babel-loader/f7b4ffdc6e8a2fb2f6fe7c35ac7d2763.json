{"ast":null,"code":"var _jsxFileName = \"/Users/mcdaniel/github/lpm0073/lawrencemcdaniel.com/site/src/components/logocube/Component.js\";\n\n/*\n    https://www.smashingmagazine.com/2018/02/react-d3-ecosystem/\n */\nimport React, { Component } from 'react';\nimport { selectAll, select } from \"d3-selection\";\nimport transition from 'd3-transition';\nimport { wpGetFeaturedImage } from '../../shared/wpGetFeaturedImage';\nimport './styles.css';\n\nclass LogoCube extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      painters: 0\n    };\n    this.startPainting = this.startPainting.bind(this);\n    this.finishPainting = this.finishPainting.bind(this);\n  }\n\n  startPainting() {\n    this.setState({\n      painters: this.props.painters++\n    });\n  }\n\n  finishPainting() {\n    this.setState({\n      painters: this.props.painters--\n    });\n  }\n\n  componentDidMount() {\n    console.log(\"componentDidMount()\", self.props.painters);\n    var self = this;\n\n    if (self.props.painters == 0) {\n      setTimeout(function () {\n        console.log(\"i'm calling repaint()\");\n        self.repaint();\n      }, 1000);\n    }\n  }\n\n  componentDidUpdate() {}\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d3-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d3-cube\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d3-side top\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 50\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d3-side front\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 52\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d3-side back\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 51\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d3-side right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d3-side left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d3-side bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 25\n      }\n    })))));\n  }\n\n  logos() {\n    var self = this;\n    return self.props.logos.items;\n  }\n\n  shuffleArray(array) {\n    let i = array.length - 1;\n\n    for (; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      const temp = array[i];\n      array[i] = array[j];\n      array[j] = temp;\n    }\n\n    return array;\n  }\n\n  repaint() {\n    var self = this;\n\n    if (self.props.logos.items.length == 0) {\n      console.log(\"i am not ready.\");\n      return false;\n    }\n\n    if (self.props.painters > 0) {\n      console.log(\"too many painters. leaving.\");\n      return false;\n    }\n\n    this.startPainting();\n    console.log(\"repaint()\", self.props.logos.items.length);\n\n    function random_logo(logos) {\n      return logos[Math.floor(Math.random() * logos.length)];\n    }\n\n    const logos = this.props.logos.items.map((post, indx) => {\n      return wpGetFeaturedImage(post, null);\n    });\n    var idx = Math.floor(Math.random() * selectAll(\".logo\").size());\n    selectAll(\".logo\").filter(function (d, i) {\n      return i === idx;\n    }).each(function () {\n      var side = select(this);\n      setTimeout(function () {\n        side.transition().duration(500).style(\"opacity\", 0);\n        side.style(\"background-image\", \"url('\" + random_logo(logos) + \"')\");\n        side.transition().duration(500).style(\"opacity\", 1);\n        self.finishPainting();\n        self.repaint();\n      }, 3000 * Math.random());\n    });\n  }\n\n}\n\nexport default LogoCube;","map":{"version":3,"sources":["/Users/mcdaniel/github/lpm0073/lawrencemcdaniel.com/site/src/components/logocube/Component.js"],"names":["React","Component","selectAll","select","transition","wpGetFeaturedImage","LogoCube","constructor","props","state","painters","startPainting","bind","finishPainting","setState","componentDidMount","console","log","self","setTimeout","repaint","componentDidUpdate","render","logos","items","shuffleArray","array","i","length","j","Math","floor","random","temp","random_logo","map","post","indx","idx","size","filter","d","each","side","duration","style"],"mappings":"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","sourcesContent":["/*\n    https://www.smashingmagazine.com/2018/02/react-d3-ecosystem/\n */\nimport React, { Component } from 'react';\nimport { selectAll, select } from \"d3-selection\";\nimport transition from 'd3-transition';\nimport { wpGetFeaturedImage } from '../../shared/wpGetFeaturedImage';\nimport './styles.css';\n\nclass LogoCube extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            painters: 0\n        };\n        this.startPainting = this.startPainting.bind(this);\n        this.finishPainting = this.finishPainting.bind(this);\n    }\n\n    startPainting() {\n        this.setState({\n            painters: this.props.painters++\n        });\n\n    }\n    finishPainting() {\n        this.setState({\n            painters: this.props.painters--\n        });\n\n    }\n\n\n    componentDidMount() {\n\n        console.log(\"componentDidMount()\", self.props.painters);\n        var self = this;\n        if (self.props.painters == 0) {\n            setTimeout(function() {\n                console.log(\"i'm calling repaint()\")\n                self.repaint();\n            }, 1000);\n    \n        }\n\n\n    }\n\n    componentDidUpdate() {\n\n    }\n\n    render() {\n\n        return(\n\n            <div className=\"d3-container\">\n                <div className=\"d3-cube\">\n                    <div className=\"d3-side top\"><div>\n                        <div className=\"logo\"></div>\n                    </div></div>\n\n                    <div className=\"d3-side front\"><div>\n                        <div className=\"logo\"></div>\n                    </div></div>\n\n                    <div className=\"d3-side back\"><div>\n                        <div className=\"logo\"></div>\n                    </div></div>\n\n                    <div className=\"d3-side right\">\n                        <div>\n                        <div className=\"logo\"></div>\n                        </div>\n                    </div>\n                    <div className=\"d3-side left\">\n                        <div>\n                        <div className=\"logo\"></div>\n                        </div>\n                    </div>\n                    <div className=\"d3-side bottom\"><div>\n                        <div className=\"logo\"></div>\n                    </div></div>\n                </div>\n            </div>\n\n        );\n    }\n\n    logos() {\n        var self = this;\n        return self.props.logos.items;\n    }\n\n    shuffleArray(array) {\n        let i = array.length - 1;\n        for (; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            const temp = array[i];\n            array[i] = array[j];\n            array[j] = temp;\n        }\n        return array;\n    }\n\n\n    repaint() {\n        var self = this;\n        if (self.props.logos.items.length == 0) {\n            console.log(\"i am not ready.\");\n            return false;\n        }\n        if (self.props.painters > 0) {\n            console.log(\"too many painters. leaving.\");\n            return false;\n        }\n        this.startPainting();\n        console.log(\"repaint()\", self.props.logos.items.length);\n\n        function random_logo(logos) {\n            return logos[Math.floor(Math.random() * logos.length)];\n        }\n    \n        const logos =  this.props.logos.items.map((post, indx) => {\n            return wpGetFeaturedImage(post, null);\n        });\n              \n        var idx = Math.floor(Math.random() * selectAll(\".logo\").size());\n        selectAll(\".logo\")\n          .filter(function(d, i) {return i === idx})\n          .each(function() {\n      \n            var side = select(this);\n            setTimeout(function() {\n                side.transition()\n                    .duration(500)\n                    .style(\"opacity\", 0);\n        \n                side.style(\"background-image\", \"url('\" + random_logo(logos) + \"')\");\n        \n                side.transition()\n                    .duration(500)\n                    .style(\"opacity\", 1);\n        \n                self.finishPainting();\n                self.repaint();\n              }, 3000*Math.random());   \n      \n      \n          });\n      \n    }\n      \n}\n\nexport default LogoCube;\n"]},"metadata":{},"sourceType":"module"}