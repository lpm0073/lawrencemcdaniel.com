{"ast":null,"code":"var _jsxFileName = \"/Users/mcdaniel/github/lpm0073/lawrencemcdaniel.com/site/src/components/logoCube/Component.js\";\n\n/*\n    Renders a spinning cube that shows random collections of logos that randomly\n    update at random intervals. Logos are provided by a REST api that is \n    managed by Redux.\n    \n    Logos API: https://api.lawrencemcdaniel.com/wp-json/wp/v2/posts?categories=43&_embed&per_page=100\n\n    The cube, which is pure CSS and HTML, was scaffolded from a D3 example that I liked, created by Noah Veltman. \n    Ironically, the D3 source code itself wasn't useful. I encountered a variety of challenges with using D3.js for this component. \n    Though all of these challenges were solvable, in the end it was most practical to leave the DOM manipulations to ReactJS. \n    You can review the GitHub commit history of this file to see the early versions of this component implemented with D3.js\n\n    Noah's original cube: https://bl.ocks.org/veltman/4c989172ac2f820b0b7267c53cb96975 \n    \n\n    The component life cycle is as follows:\n    =================================================\n\n    I. Animated cube rendering (approximately 1,500 ms):\n    This is intended to distract the site visitor for a moment while we pre-fetch the first set\n    of logo images (for slow internet connections). We initialize the cube w 6 locally-stored\n    and highly-optimized logos (one per cube side) that, incidentally, I most want visitors to see.\n    (React, Redux, Angular, Django, AWS, Wordpress)\n\n    II. Update infinitely:\n    Randomly show lots of other logos. The longer the site visitor stares at this logo cube\n    the better, because it buys time for the image pre-fetcher to download more \n    site content in the background. Don't be impressed however, I stole this idea from nytimes.com\n\n\n    Some of the challenges, and their solutions:\n    =================================================\n    A. Lack of impact\n    The logo cube is supposed to be a creative way of showcasing my most important\n    (self-proclaimed) technology skills to site visitors. Most visitors however,\n    will only see the cube for a couple of seconds and then move on to some other page.\n    Thus, a random selection of logos works at cross purposes to this design objective since \n    most of the logos pertain to lesser-known supporting technologies.\n\n    solution: I created a 2nd api feed consisting of six \"featured\" logos.\n    I initialize the cube with the featured logos, and then hold these\n    logos in place for 5 seconds before initiating the random logo replacements.\n    \n    B. Disappointing logo shuffle.\n    It bothered me that sometimes all six cube sides would display only\n    the logos of unimpressive technologies for an extended period of time.\n    I found myself staring at the cube anxiously waiting for a \"good\" \n    logo to appear.\n\n    solution: \n    I reserve one of the six cube sides for exclusively displaying\n    one of the six featured logos.\n\n    C. Reverse Rotation (aka \"Wagon Wheel\" Effect)\n    I had trouble visually tracking the motion of the original version of the cube's spinning animations.\n    The cube would sometimes appear to be spinning left-to-right, and other times right-to-left. In\n    the latter cases the cube appeared mal-constructed and disfigured. Here's a technical explanation\n    of the nature of this problem: https://en.wikipedia.org/wiki/Wagon-wheel_effect\n\n    solution:\n    First, i tinkered with the opacity of the cube sides so that the side that is supposed to be in front is brighter, \n    and the reverse side is darker. Secondly, adding the cube rendering helped a lot because the cube begins\n    as a 2-dimensional spinning square, which afterwards grows to become a cube. The 2D spinning image is easier for your\n    visual cortex to process, and the growth animation provides a way for your mind to bootstrap and retain what's\n    happening on-screen.\n\n    D. Screen flicker. \n    React mounts/unmounts components multiple times, often for \n    reasons that are external to the component. React also calls render()\n    several times during normal component initialization. Both of these are \n    problems for CSS animations because these end up getting killed in mid-animation and\n    restarted multiple times (ie screen flicker), which looks terrible.\n\n    solution: I fixed the screen flicker with a few different kinds of timers\n    that are intended to delay rendering the cube (and thus initiating the CSS\n    animations) until React has had enough time to get the home screen \n    completely setup.\n\n    E. Erratic Logo updates. \n    Logos change at random intervals. However, it looks bad if a logo is replaced too quickly. \n\n    solution: I added 6 timers to track the elapsed lifetime of each logo,\n    and then I only replace a logo if its been visible for a minimum\n    length of time.\n\n    F. Orphan Threads.\n    Launching the painter() method with a timer delay is tricky\n    because it is initiated on a new asynchronous background thread.\n    When the component mounts/unmounts very quickly, the threads lives on,\n    resulting in several painter() threads co-existing, which causes\n    the cube to update multitudes more frequently than I wanted.\n\n    solution: I fixed the threading issue by keeping track of, and explicitly killing \n    all background threads that I create.\n\n    G. Slow loading logos.\n    The cube itself is rendered purely in CSS and so always renders smoothly, but it\n    depends on a collection of around 75 logo images provided by the\n    REST api via Redux. On a slow internet connection you could see each new logo\n    downloading on the cube side, which looked terrible. \n\n    solution: \n    a.) i setup an image pre-fetcher inside of Redux, not just for\n    this logo cube but for the hundreds of other images on this site as\n    well.\n\n    b.) i store the first six logos locally so that these are included in the React\n    bundles and are delivered to the browser immediately.\n\n    c.) i web-optimized all of the logos to decrease network load.\n\n    d.) i make AWS Cloudfront gzip all of the images, which reduces an additional 30%\n    or so of network overhead.\n\n    H. Duplicate logos\n    It bothered me that the same logo would sometimes appears on two (or more)\n    sides.\n\n    solution: i added some \"no collision\" logic to prevent the random logo\n    selector from choosing any logos that are currently being displayed.\n\n    I. React Insomnia. \n    Every time the cube rendered, React would behave as if the site visitor had just\n    arrived to the site, even when this was not the case. For example, if a user lands \n    on the home page then they would see the glory of the Logo Cube. But if they navigated\n    to another page and later returned to the home page then they'd see then entire \n    construction of the cube, and the same 6 initialization logos.\n\n    solution: i push the component state to Redux, and disable the initial rendering animations\n    if the cube has already been rendered. More: https://medium.com/the-web-tub/managing-your-react-state-with-redux-affab72de4b1\n\n*/\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as Actions from '../../redux/ActionCreators';\nimport { shuffleArray } from '../../shared/shuffle';\nimport './styles.css';\n\nconst mapStateToProps = state => ({ ...state\n});\n\nconst mapDispatchToProps = dispatch => ({\n  actions: bindActionCreators(Actions, dispatch)\n});\n\nconst CubeSide = props => {\n  const clsId = \"d3-side \" + props.side + \" \" + props.classes;\n  const divId = \"cube-\" + props.side + \"-logo-div\";\n  const divStyle = {\n    backgroundImage: \"url('\" + props.url + \"')\"\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    key: divId,\n    className: clsId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    key: divId + \"-logo\",\n    className: \"logo\",\n    style: divStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 21\n    }\n  }))));\n};\n\nclass LogoCube extends Component {\n  constructor(props) {\n    super(props);\n    this.getElapsedTime = this.getElapsedTime.bind(this);\n    this.getBackgroundUrl = this.getBackgroundUrl.bind(this);\n    this.setBackgroundUrl = this.setBackgroundUrl.bind(this);\n    this.getRandomSide = this.getRandomSide.bind(this);\n    this.getRandomLogo = this.getRandomLogo.bind(this);\n    this.getSerializedLogo = this.getSerializedLogo.bind(this);\n    this.isLogoCollision = this.isLogoCollision.bind(this);\n    this.repaint = this.repaint.bind(this);\n    /* check for component state in Redux store */\n\n    if (this.props.logoCube.isSet) {\n      this.state = this.props.logoCube.state;\n    } else {\n      const d = new Date();\n      /* grab a locally-stored set of six logos for initializing the cube sides */\n\n      const initialLogos = this.getInitialCubeLogos();\n      this.state = {\n        /* delay threads, to prevent the component from re-rendering if we're in mid-animation */\n        repaintDelay: null,\n\n        /* the current logo image URL for each of the 6 logos */\n        cubeTopBackgroundUrl: this.getSerializedLogo(initialLogos, 0),\n        cubeBottomBackgroundUrl: this.getSerializedLogo(initialLogos, 1),\n        cubeLeftBackgroundUrl: this.getSerializedLogo(initialLogos, 2),\n        cubeRightBackgroundUrl: this.getSerializedLogo(initialLogos, 3),\n        cubeFrontBackgroundUrl: this.getSerializedLogo(initialLogos, 4),\n        cubeBackBackgroundUrl: this.getSerializedLogo(initialLogos, 5),\n\n        /* time stamps to track elapsed time of each logo image */\n        constructed: d,\n        cubeTop: d,\n        cubeBottom: d,\n        cubeLeft: d,\n        cubeRight: d,\n        cubeFront: d,\n        cubeBack: d\n      };\n    }\n  }\n\n  componentDidMount() {\n    /*  we nest repaint() inside of a timer so that we have a means\n        of killing the thread in cases where the component \n        quickly unmounts.\n    */\n    const self = this;\n    const myTimeout = setTimeout(function () {\n      self.repaint();\n    }, 100);\n    this.setState({\n      repaintDelay: myTimeout\n    });\n  }\n\n  componentWillUnmount() {\n    /* kill any pending background threads that were\n    invoked in componentDidMount(). */\n    clearTimeout(this.state.repaintDelay);\n    clearTimeout(this.state.fetchDelay);\n    /* send component state to Redux store */\n\n    const state = this.state;\n    this.props.actions.setLogoState({\n      state\n    });\n  }\n\n  render() {\n    const sideClass = !this.props.logoCube.isSet ? \"grow-side\" : \"\";\n    const capClass = !this.props.logoCube.isSet ? \"fade-in\" : \"\";\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: \"logo-cube\",\n      className: \"d3-container mt-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d3-cube mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CubeSide, {\n      side: \"top\",\n      url: this.getBackgroundUrl(\"top\"),\n      classes: capClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(CubeSide, {\n      side: \"bottom\",\n      url: this.getBackgroundUrl(\"bottom\"),\n      classes: capClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(CubeSide, {\n      side: \"front\",\n      url: this.getBackgroundUrl(\"front\"),\n      classes: sideClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(CubeSide, {\n      side: \"back\",\n      url: this.getBackgroundUrl(\"back\"),\n      classes: sideClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(CubeSide, {\n      side: \"right\",\n      url: this.getBackgroundUrl(\"right\"),\n      classes: sideClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(CubeSide, {\n      side: \"left\",\n      url: this.getBackgroundUrl(\"left\"),\n      classes: sideClass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 21\n      }\n    })));\n  }\n\n  repaint() {\n    /* place a random logo on a random side at a random point in time. */\n    if (!this.props.specialties.isLoading) {\n      const side = this.getRandomSide();\n      const logos = side === \"front\" ? this.props.specialties.featured_logos : this.props.specialties.logos;\n      const logo = this.getRandomLogo(logos);\n      const elapsed = this.getElapsedTime(side);\n\n      if (side != null && elapsed > 2000) {\n        this.setBackgroundUrl(side, logo);\n      }\n    }\n\n    const self = this;\n    setTimeout(function () {\n      self.repaint();\n    }, 750 * Math.random());\n  }\n  /* ---------------------------------------------------------------\n      Hereon, the drudgerous grind of working with a six-sided object.  \n   * --------------------------------------------------------------- */\n\n\n  getBackgroundUrl(side) {\n    let retval;\n\n    switch (side) {\n      case \"top\":\n        retval = this.state.cubeTopBackgroundUrl;\n        break;\n\n      case \"bottom\":\n        retval = this.state.cubeBottomBackgroundUrl;\n        break;\n\n      case \"left\":\n        retval = this.state.cubeLeftBackgroundUrl;\n        break;\n\n      case \"right\":\n        retval = this.state.cubeRightBackgroundUrl;\n        break;\n\n      case \"front\":\n        retval = this.state.cubeFrontBackgroundUrl;\n        break;\n\n      case \"back\":\n        retval = this.state.cubeBackBackgroundUrl;\n        break;\n\n      default:\n        retval = null;\n        break;\n    }\n\n    return retval;\n  }\n\n  setBackgroundUrl(side, url) {\n    const d = new Date();\n    let state;\n\n    switch (side) {\n      case \"top\":\n        state = {\n          cubeTopBackgroundUrl: url,\n          cubeTop: d\n        };\n        break;\n\n      case \"bottom\":\n        state = {\n          cubeBottomBackgroundUrl: url,\n          cubeBottom: d\n        };\n        break;\n\n      case \"left\":\n        state = {\n          cubeLeftBackgroundUrl: url,\n          cubeLeft: d\n        };\n        break;\n\n      case \"right\":\n        state = {\n          cubeRightBackgroundUrl: url,\n          cubeRight: d\n        };\n        break;\n\n      case \"front\":\n        state = {\n          cubeFrontBackgroundUrl: url,\n          cubeFront: d\n        };\n        break;\n\n      case \"back\":\n        state = {\n          cubeBackBackgroundUrl: url,\n          cubeBack: d\n        };\n        break;\n\n      default:\n        state = {};\n        break;\n    }\n\n    this.setState(state);\n  }\n\n  getElapsedTime(side) {\n    const d = new Date();\n\n    switch (side) {\n      case \"top\":\n        return d - this.state.cubeTop;\n\n      case \"bottom\":\n        return d - this.state.cubeBottom;\n\n      case \"left\":\n        return d - this.state.cubeLeft;\n\n      case \"right\":\n        return d - this.state.cubeRight;\n\n      case \"front\":\n        return d - this.state.cubeFront;\n\n      case \"back\":\n        return d - this.state.cubeBack;\n\n      default:\n        return d - this.state.constructed;\n    }\n  }\n\n  getSerializedLogo(logos, i) {\n    /* this handles the hopefully-rare case\n    where I might stupidly neglect to have 6 more\n    featured logos in the Wordpress api. */\n    if (logos === null) return 0;\n\n    if (i < logos.length) {\n      return logos[i];\n    }\n  }\n\n  isLogoCollision(logo) {\n    switch (logo) {\n      case this.state.cubeTopBackgroundUrl:\n      case this.state.cubeBottomBackgroundUrl:\n      case this.state.cubeBackBackgroundUrl:\n      case this.state.cubeFrontBackgroundUrl:\n      case this.state.cubeLeftBackgroundUrl:\n      case this.state.cubeRightBackgroundUrl:\n        return true;\n\n      default:\n        return false;\n    }\n  }\n\n  getRandomLogo(logos) {\n    if (logos === null) return null;\n    var logo,\n        i = 0;\n\n    do {\n      logo = logos[Math.floor(Math.random() * logos.length)];\n      i++;\n    } while (this.isLogoCollision(logo) && i <= logos.length);\n\n    return logo;\n  }\n\n  getRandomSide() {\n    const side = Math.floor(Math.random() * 6);\n\n    switch (side) {\n      case 0:\n        return \"top\";\n\n      case 1:\n        return \"bottom\";\n\n      case 2:\n        return \"left\";\n\n      case 3:\n        return \"right\";\n\n      case 4:\n        return \"front\";\n\n      case 5:\n        return \"back\";\n\n      default:\n        return null;\n    }\n  }\n\n  getInitialCubeLogos() {\n    return shuffleArray(['assets/images/amazon-web-services.png', 'assets/images/django-logo-300x137.png', 'assets/images/open-edx.png', 'assets/images/react-logo-300x261.png', 'assets/images/Redux_Logo-300x80.png', 'assets/images/wordpress-100x161.png']);\n  }\n\n}\n/* LogoCube component */\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LogoCube);","map":{"version":3,"sources":["/Users/mcdaniel/github/lpm0073/lawrencemcdaniel.com/site/src/components/logoCube/Component.js"],"names":["React","Component","connect","bindActionCreators","Actions","shuffleArray","mapStateToProps","state","mapDispatchToProps","dispatch","actions","CubeSide","props","clsId","side","classes","divId","divStyle","backgroundImage","url","LogoCube","constructor","getElapsedTime","bind","getBackgroundUrl","setBackgroundUrl","getRandomSide","getRandomLogo","getSerializedLogo","isLogoCollision","repaint","logoCube","isSet","d","Date","initialLogos","getInitialCubeLogos","repaintDelay","cubeTopBackgroundUrl","cubeBottomBackgroundUrl","cubeLeftBackgroundUrl","cubeRightBackgroundUrl","cubeFrontBackgroundUrl","cubeBackBackgroundUrl","constructed","cubeTop","cubeBottom","cubeLeft","cubeRight","cubeFront","cubeBack","componentDidMount","self","myTimeout","setTimeout","setState","componentWillUnmount","clearTimeout","fetchDelay","setLogoState","render","sideClass","capClass","specialties","isLoading","logos","featured_logos","logo","elapsed","Math","random","retval","i","length","floor"],"mappings":"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","sourcesContent":["/*\n    Renders a spinning cube that shows random collections of logos that randomly\n    update at random intervals. Logos are provided by a REST api that is \n    managed by Redux.\n    \n    Logos API: https://api.lawrencemcdaniel.com/wp-json/wp/v2/posts?categories=43&_embed&per_page=100\n\n    The cube, which is pure CSS and HTML, was scaffolded from a D3 example that I liked, created by Noah Veltman. \n    Ironically, the D3 source code itself wasn't useful. I encountered a variety of challenges with using D3.js for this component. \n    Though all of these challenges were solvable, in the end it was most practical to leave the DOM manipulations to ReactJS. \n    You can review the GitHub commit history of this file to see the early versions of this component implemented with D3.js\n\n    Noah's original cube: https://bl.ocks.org/veltman/4c989172ac2f820b0b7267c53cb96975 \n    \n\n    The component life cycle is as follows:\n    =================================================\n\n    I. Animated cube rendering (approximately 1,500 ms):\n    This is intended to distract the site visitor for a moment while we pre-fetch the first set\n    of logo images (for slow internet connections). We initialize the cube w 6 locally-stored\n    and highly-optimized logos (one per cube side) that, incidentally, I most want visitors to see.\n    (React, Redux, Angular, Django, AWS, Wordpress)\n\n    II. Update infinitely:\n    Randomly show lots of other logos. The longer the site visitor stares at this logo cube\n    the better, because it buys time for the image pre-fetcher to download more \n    site content in the background. Don't be impressed however, I stole this idea from nytimes.com\n\n\n    Some of the challenges, and their solutions:\n    =================================================\n    A. Lack of impact\n    The logo cube is supposed to be a creative way of showcasing my most important\n    (self-proclaimed) technology skills to site visitors. Most visitors however,\n    will only see the cube for a couple of seconds and then move on to some other page.\n    Thus, a random selection of logos works at cross purposes to this design objective since \n    most of the logos pertain to lesser-known supporting technologies.\n\n    solution: I created a 2nd api feed consisting of six \"featured\" logos.\n    I initialize the cube with the featured logos, and then hold these\n    logos in place for 5 seconds before initiating the random logo replacements.\n    \n    B. Disappointing logo shuffle.\n    It bothered me that sometimes all six cube sides would display only\n    the logos of unimpressive technologies for an extended period of time.\n    I found myself staring at the cube anxiously waiting for a \"good\" \n    logo to appear.\n\n    solution: \n    I reserve one of the six cube sides for exclusively displaying\n    one of the six featured logos.\n\n    C. Reverse Rotation (aka \"Wagon Wheel\" Effect)\n    I had trouble visually tracking the motion of the original version of the cube's spinning animations.\n    The cube would sometimes appear to be spinning left-to-right, and other times right-to-left. In\n    the latter cases the cube appeared mal-constructed and disfigured. Here's a technical explanation\n    of the nature of this problem: https://en.wikipedia.org/wiki/Wagon-wheel_effect\n\n    solution:\n    First, i tinkered with the opacity of the cube sides so that the side that is supposed to be in front is brighter, \n    and the reverse side is darker. Secondly, adding the cube rendering helped a lot because the cube begins\n    as a 2-dimensional spinning square, which afterwards grows to become a cube. The 2D spinning image is easier for your\n    visual cortex to process, and the growth animation provides a way for your mind to bootstrap and retain what's\n    happening on-screen.\n\n    D. Screen flicker. \n    React mounts/unmounts components multiple times, often for \n    reasons that are external to the component. React also calls render()\n    several times during normal component initialization. Both of these are \n    problems for CSS animations because these end up getting killed in mid-animation and\n    restarted multiple times (ie screen flicker), which looks terrible.\n\n    solution: I fixed the screen flicker with a few different kinds of timers\n    that are intended to delay rendering the cube (and thus initiating the CSS\n    animations) until React has had enough time to get the home screen \n    completely setup.\n\n    E. Erratic Logo updates. \n    Logos change at random intervals. However, it looks bad if a logo is replaced too quickly. \n\n    solution: I added 6 timers to track the elapsed lifetime of each logo,\n    and then I only replace a logo if its been visible for a minimum\n    length of time.\n\n    F. Orphan Threads.\n    Launching the painter() method with a timer delay is tricky\n    because it is initiated on a new asynchronous background thread.\n    When the component mounts/unmounts very quickly, the threads lives on,\n    resulting in several painter() threads co-existing, which causes\n    the cube to update multitudes more frequently than I wanted.\n\n    solution: I fixed the threading issue by keeping track of, and explicitly killing \n    all background threads that I create.\n\n    G. Slow loading logos.\n    The cube itself is rendered purely in CSS and so always renders smoothly, but it\n    depends on a collection of around 75 logo images provided by the\n    REST api via Redux. On a slow internet connection you could see each new logo\n    downloading on the cube side, which looked terrible. \n\n    solution: \n    a.) i setup an image pre-fetcher inside of Redux, not just for\n    this logo cube but for the hundreds of other images on this site as\n    well.\n\n    b.) i store the first six logos locally so that these are included in the React\n    bundles and are delivered to the browser immediately.\n\n    c.) i web-optimized all of the logos to decrease network load.\n\n    d.) i make AWS Cloudfront gzip all of the images, which reduces an additional 30%\n    or so of network overhead.\n\n    H. Duplicate logos\n    It bothered me that the same logo would sometimes appears on two (or more)\n    sides.\n\n    solution: i added some \"no collision\" logic to prevent the random logo\n    selector from choosing any logos that are currently being displayed.\n\n    I. React Insomnia. \n    Every time the cube rendered, React would behave as if the site visitor had just\n    arrived to the site, even when this was not the case. For example, if a user lands \n    on the home page then they would see the glory of the Logo Cube. But if they navigated\n    to another page and later returned to the home page then they'd see then entire \n    construction of the cube, and the same 6 initialization logos.\n\n    solution: i push the component state to Redux, and disable the initial rendering animations\n    if the cube has already been rendered. More: https://medium.com/the-web-tub/managing-your-react-state-with-redux-affab72de4b1\n\n*/\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as Actions from '../../redux/ActionCreators';\n\nimport { shuffleArray } from '../../shared/shuffle';\nimport './styles.css';\n\nconst mapStateToProps = state => ({\n      ...state\n});\nconst mapDispatchToProps = (dispatch) => ({\n    actions: bindActionCreators(Actions, dispatch)\n});\n\nconst CubeSide = (props) => {\n\n    const clsId = \"d3-side \" + props.side + \" \" + props.classes;\n    const divId = \"cube-\" + props.side + \"-logo-div\";\n    const divStyle = {\n        backgroundImage: \"url('\" + props.url + \"')\"\n      }\n\n    return(\n        <React.Fragment >\n            <div key={divId}\n                 className={clsId}>\n                <div>\n                    <div key={divId+\"-logo\"} className=\"logo\" \n                        style={divStyle}>\n                    </div>\n                </div>\n            </div>\n        </React.Fragment>\n    );\n}\n\nclass LogoCube extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.getElapsedTime = this.getElapsedTime.bind(this);\n        this.getBackgroundUrl = this.getBackgroundUrl.bind(this);\n        this.setBackgroundUrl = this.setBackgroundUrl.bind(this);\n        this.getRandomSide = this.getRandomSide.bind(this);\n        this.getRandomLogo = this.getRandomLogo.bind(this);\n        this.getSerializedLogo = this.getSerializedLogo.bind(this);\n        this.isLogoCollision = this.isLogoCollision.bind(this);\n        this.repaint = this.repaint.bind(this);\n\n        /* check for component state in Redux store */\n        if (this.props.logoCube.isSet) {\n            this.state = this.props.logoCube.state;\n        } else {\n            const d = new Date();\n\n            /* grab a locally-stored set of six logos for initializing the cube sides */\n            const initialLogos = this.getInitialCubeLogos();\n    \n            this.state = {\n\n                /* delay threads, to prevent the component from re-rendering if we're in mid-animation */\n                repaintDelay: null,\n    \n                /* the current logo image URL for each of the 6 logos */\n                cubeTopBackgroundUrl: this.getSerializedLogo(initialLogos, 0),\n                cubeBottomBackgroundUrl: this.getSerializedLogo(initialLogos, 1),\n                cubeLeftBackgroundUrl: this.getSerializedLogo(initialLogos, 2),\n                cubeRightBackgroundUrl: this.getSerializedLogo(initialLogos, 3),\n                cubeFrontBackgroundUrl: this.getSerializedLogo(initialLogos, 4),\n                cubeBackBackgroundUrl: this.getSerializedLogo(initialLogos, 5),\n    \n                /* time stamps to track elapsed time of each logo image */\n                constructed: d,\n                cubeTop: d,\n                cubeBottom: d,\n                cubeLeft: d,\n                cubeRight: d,\n                cubeFront: d,\n                cubeBack: d    \n              };\n        }\n    }\n\n    componentDidMount() {\n        /*  we nest repaint() inside of a timer so that we have a means\n            of killing the thread in cases where the component \n            quickly unmounts.\n        */\n\n        const self = this;\n        const myTimeout = setTimeout(function() {\n            self.repaint();\n        }, 100);    \n        this.setState({\n            repaintDelay: myTimeout\n        });\n\n    }\n\n    componentWillUnmount() {\n        /* kill any pending background threads that were\n        invoked in componentDidMount(). */\n        clearTimeout(this.state.repaintDelay);\n        clearTimeout(this.state.fetchDelay);\n\n        /* send component state to Redux store */\n        const state = this.state;\n        this.props.actions.setLogoState({state});\n    }\n    \n    render() {\n        const sideClass = !this.props.logoCube.isSet ? \"grow-side\": \"\" ;\n        const capClass = !this.props.logoCube.isSet ? \"fade-in\": \"\" ;\n\n        return(\n            <div key=\"logo-cube\" className=\"d3-container mt-0\">\n                <div className=\"d3-cube mt-5\">\n                    <CubeSide side=\"top\" url={this.getBackgroundUrl(\"top\")} classes={capClass} />\n                    <CubeSide side=\"bottom\" url={this.getBackgroundUrl(\"bottom\")} classes={capClass} />\n                    <CubeSide side=\"front\" url={this.getBackgroundUrl(\"front\")} classes={sideClass} />\n                    <CubeSide side=\"back\" url={this.getBackgroundUrl(\"back\")} classes={sideClass} />\n                    <CubeSide side=\"right\" url={this.getBackgroundUrl(\"right\")} classes={sideClass} />\n                    <CubeSide side=\"left\" url={this.getBackgroundUrl(\"left\")} classes={sideClass} />\n                </div>\n            </div>\n        );\n    }\n\n    repaint() {\n        /* place a random logo on a random side at a random point in time. */\n        if (!this.props.specialties.isLoading) {\n\n            const side = this.getRandomSide();\n            const logos = (side === \"front\") ? this.props.specialties.featured_logos: this.props.specialties.logos;\n            const logo = this.getRandomLogo(logos);\n            const elapsed = this.getElapsedTime(side);\n            if (side != null && elapsed > 2000) {\n                this.setBackgroundUrl(side, logo);\n            }\n\n        }\n    \n        const self = this;\n        setTimeout(function() {\n            self.repaint();\n        }, 750 * Math.random());   \n      \n    }\n\n    /* ---------------------------------------------------------------\n        Hereon, the drudgerous grind of working with a six-sided object.  \n     * --------------------------------------------------------------- */\n    getBackgroundUrl(side) {\n        let retval;\n        switch(side) {\n            case \"top\": retval = this.state.cubeTopBackgroundUrl; break;\n            case \"bottom\": retval =  this.state.cubeBottomBackgroundUrl; break;\n            case \"left\": retval =  this.state.cubeLeftBackgroundUrl; break;\n            case \"right\": retval =  this.state.cubeRightBackgroundUrl; break;\n            case \"front\": retval =  this.state.cubeFrontBackgroundUrl; break;\n            case \"back\": retval =  this.state.cubeBackBackgroundUrl; break;\n            default: retval = null; break;\n        }\n        return retval;\n    }\n\n    setBackgroundUrl(side, url) {\n        const d = new Date();\n\n        let state;\n        switch(side) {\n            case \"top\": state = {cubeTopBackgroundUrl: url, cubeTop: d}; break;\n            case \"bottom\": state = {cubeBottomBackgroundUrl: url, cubeBottom: d}; break;\n            case \"left\": state = {cubeLeftBackgroundUrl: url, cubeLeft: d}; break;\n            case \"right\": state = {cubeRightBackgroundUrl: url, cubeRight: d}; break;\n            case \"front\": state = {cubeFrontBackgroundUrl: url, cubeFront: d}; break;\n            case \"back\": state = {cubeBackBackgroundUrl: url, cubeBack: d}; break;\n            default: state = {}; break;\n        }\n        this.setState(state);\n    }\n\n    getElapsedTime(side) {\n        const d = new Date();\n        switch(side) {\n            case \"top\": return d - this.state.cubeTop;\n            case \"bottom\": return d - this.state.cubeBottom;\n            case \"left\": return d - this.state.cubeLeft;\n            case \"right\": return d - this.state.cubeRight;\n            case \"front\": return d - this.state.cubeFront;\n            case \"back\": return d - this.state.cubeBack;\n            default: return d - this.state.constructed;\n        }\n    }\n      \n    getSerializedLogo(logos, i) {\n        /* this handles the hopefully-rare case\n        where I might stupidly neglect to have 6 more\n        featured logos in the Wordpress api. */\n\n        if (logos === null) return 0;\n\n        if (i < logos.length) {\n            return logos[i];\n        }\n    }\n\n    isLogoCollision(logo) {\n\n        switch (logo) {\n            case this.state.cubeTopBackgroundUrl:\n            case this.state.cubeBottomBackgroundUrl:\n            case this.state.cubeBackBackgroundUrl:\n            case this.state.cubeFrontBackgroundUrl:\n            case this.state.cubeLeftBackgroundUrl:\n            case this.state.cubeRightBackgroundUrl:\n                return true;\n            default:\n                return false;\n        }\n\n    }\n\n    getRandomLogo(logos) {\n        if (logos === null) return null;\n\n        var logo, i = 0;\n        do {\n            logo = logos[Math.floor(Math.random() * logos.length)];\n            i++;\n        } while (this.isLogoCollision(logo) && (i <= logos.length))\n        return logo;\n    }\n\n    getRandomSide() {\n        const side = Math.floor(Math.random() * 6);\n        switch(side) {\n            case 0: return \"top\";\n            case 1: return \"bottom\";\n            case 2: return \"left\";\n            case 3: return \"right\";\n            case 4: return \"front\";\n            case 5: return \"back\";\n            default: return null;\n        }\n    }\n\n    getInitialCubeLogos() {\n        return shuffleArray([\n            'assets/images/amazon-web-services.png',\n            'assets/images/django-logo-300x137.png',\n            'assets/images/open-edx.png',\n            'assets/images/react-logo-300x261.png',\n            'assets/images/Redux_Logo-300x80.png',\n            'assets/images/wordpress-100x161.png'\n        ]);\n    }\n} /* LogoCube component */\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LogoCube);\n\n"]},"metadata":{},"sourceType":"module"}